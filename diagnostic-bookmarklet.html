<!DOCTYPE html>
<html>
<head>
    <title>üìñ Diagnostic Bookmarklet</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            max-width: 700px;
            margin: 50px auto;
            padding: 20px;
            line-height: 1.6;
        }
        .code-area {
            background: #f1f3f4;
            border: 1px solid #dadce0;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 11px;
            margin: 10px 0;
            height: 60px;
            width: 100%;
            resize: vertical;
        }
        .button {
            background: #007aff;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            font-weight: bold;
        }
        .warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üìñ Diagnostic Bookmarklet</h1>
    
    <div class="warning">
        <strong>üîç Let's Debug This</strong><br>
        This super simple version will show you exactly what's happening with big obvious alerts.
    </div>
    
    <h3>Copy this diagnostic bookmarklet:</h3>
    <textarea class="code-area" id="bookmarkletCode" readonly>javascript:alert('üöÄ BOOKMARKLET STARTED!\n\nURL: '+window.location.href+'\nTitle: '+document.title);</textarea>
    
    <button class="button" onclick="copyToClipboard()">üìã Copy Diagnostic Code</button>
    
    <h3>Test Steps:</h3>
    <ol>
        <li><strong>Replace your bookmark URL</strong> with the code above</li>
        <li><strong>Go to any article</strong> (regular page)</li>
        <li><strong>Click the bookmark</strong></li>
        <li><strong>You should see a big alert</strong> saying "üöÄ BOOKMARKLET STARTED!"</li>
        <li><strong>If you don't see the alert, the bookmark isn't working</strong></li>
    </ol>
    
    <h3>If the diagnostic works, try this full version:</h3>
    <textarea class="code-area" id="fullCode" readonly>javascript:(function(){alert('üöÄ FULL BOOKMARKLET STARTED!');try{var title=document.querySelector('h1')?document.querySelector('h1').textContent:document.title;var content=document.querySelector('article')||document.querySelector('main')||document.body;var text=content.textContent||'';var words=text.trim().split(/\s+/).filter(function(w){return w.length>0}).length;alert('üìä EXTRACTED:\nTitle: '+title.substring(0,50)+'\nWords: '+words+'\nURL: '+window.location.href.substring(0,50));if(words<10){alert('‚ùå TOO SHORT: '+words+' words');return}var data={url:window.location.href,title:title.trim(),content:content.innerHTML,textContent:text.trim(),wordCount:words,readingTime:Math.ceil(words/200)*1000,publishDate:new Date().toISOString(),tags:'reader-view'};alert('üì° SENDING TO SERVER...');var xhr=new XMLHttpRequest();xhr.open('POST','http://127.0.0.1:3002/api/articles',true);xhr.setRequestHeader('Content-Type','application/json');xhr.onload=function(){alert(xhr.status===200?'‚úÖ SAVED SUCCESSFULLY!':'‚ùå SAVE FAILED: '+xhr.status)};xhr.send(JSON.stringify(data))}catch(e){alert('‚ùå ERROR: '+e.message)}})();</textarea>
    
    <button class="button" onclick="copyFull()">üìã Copy Full Version</button>
    
    <p><strong>This version will show you step-by-step alerts so you can see exactly where it succeeds or fails!</strong></p>

    <script>
        function copyToClipboard() {
            const textarea = document.getElementById('bookmarkletCode');
            textarea.select();
            document.execCommand('copy');
            
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = '‚úÖ Copied!';
            button.style.background = '#28a745';
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '#007aff';
            }, 2000);
        }
        
        function copyFull() {
            const textarea = document.getElementById('fullCode');
            textarea.select();
            document.execCommand('copy');
            
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = '‚úÖ Copied!';
            button.style.background = '#28a745';
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '#007aff';
            }, 2000);
        }
    </script>
</body>
</html>